(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"10wG":function(l,n,e){"use strict";var u=e("RZZm");e.d(n,"c",function(){return u.c}),e.d(n,"a",function(){return u.a}),e.d(n,"b",function(){return u.b})},"3ros":function(l,n,e){"use strict";e.d(n,"a",function(){return i});var u=e("PJQC"),t=e("WRQX"),i=(e("awt7"),function(){return function(l,n){n.addResolver(u.a,l),n.addResolver(t.a,l)}}())},Fjtg:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var u=function(){return function(){}}()},Ij5Q:function(l,n,e){"use strict";e.d(n,"a",function(){return o});var u=e("mrSG"),t=(e("eqxy"),e("dzgT")),i=(e("Ke3l"),e("psW0")),o=function(){function l(l,n,e){this.route=l,this.galleryRouterService=n,this.galleryService=e}return l.prototype.ngOnInit=function(){var l=this;this.route.queryParams.pipe(Object(i.a)(function(n){return l.albumId=n.albumId,l.photoId=n.photoId,l.albumId||l.galleryRouterService.navigateTo404(),Object(t.a)(l.galleryService.hasAccess({id:l.albumId}).$observable,l.galleryService.getGallery({id:l.albumId}).$observable)})).subscribe(function(n){var e=u.l(n,2),t=e[0],i=e[1];return l.initGallery(t,i)},function(){return l.galleryRouterService.navigateTo404()})},l.prototype.initGallery=function(l,n){this.albumInfo=n,this.hasAccess=l.data,!!(this.albumInfo&&this.albumInfo.album&&this.albumInfo.album.images&&this.albumInfo.album.images.length)||this.hasAccess||this.galleryRouterService.navigateTo404()},l}()},LtGS:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var u=function(){return function(){}}()},PjAp:function(l,n,e){"use strict";var u=e("CcnG"),t=e("mN3k"),i=e("Ip0R"),o=e("FTOZ"),a=e("Hw6Z"),r=e("OZGF"),s=e("/TZZ"),c=e("ZYjt"),d=e("MIx6"),m=e("mrSG"),p=(e("QYmF"),e("mSP8"),e("ofbX")),g=e("deJ0"),h=e("oD12"),f=e("huQU"),v=e("4qKc"),b=e("WIzN"),y=function(){function l(l,n,e,u,t,i){this.smileService=l,this.commentsLightService=n,this.ggUtils=e,this.userService=u,this.pasteToInputService=t,this.userPremiumService=i,this.premiums=new v.a}return l.prototype.ngOnInit=function(){return m.e(this,void 0,void 0,function(){var l,n;return m.h(this,function(e){switch(e.label){case 0:return this.comment.author?(l=this,[4,this.userPremiumService.convertToSmilePremiums(this.comment.author.premiums)]):[3,2];case 1:l.premiums=e.sent(),e.label=2;case 2:return this.comment.text=this.ggUtils.clearHTML(this.comment.text),n=this.comment,[4,this.smileService.parseToSmiles(this.comment.text,this.premiums)];case 3:return n.text=e.sent(),[2]}})})},l.prototype.deleteComment=function(){var l=this;this.comment.deleted=!0,this.comment.deleted_by={username:this.userService.user.username},this.commentsLightService.deleteComment({id:this.comment.id}).$observable.subscribe(function(n){return l.comment.deleted_by=n.deleted_by},function(n){return l.comment.deleted=!1})},l.prototype.undeleteComment=function(){var l=this;this.comment.deleted=!1,this.commentsLightService.undeleteComment({id:this.comment.id}).$observable.subscribe(function(l){},function(n){return l.comment.deleted=!0})},l.prototype.replyToComment=function(){this.pasteToInputService.paste(p.a.USER,'<a href="#c'+this.comment.id+'">#'+this.comment.i+"</a>")},l}(),I=e("bDe0"),C=e("9Za/"),S=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function R(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"a",[["class","element delete"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.deleteComment()&&u);return u},null,null)),(l()(),u["\u0275eld"](1,0,null,null,0,"span",[["class","icon icon-trashcan2"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]))],null,null)}function w(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"div",[["class","text-block"]],[[8,"innerHTML",1]],null,null,null,null)),u["\u0275ppd"](1,2)],null,function(l,n){var e=n.component,t=u["\u0275unv"](n,0,0,l(n,1,0,u["\u0275nov"](n.parent,1),e.comment.text,"html"));l(n,0,0,t)})}function k(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,2,"gg-custom-spoiler",[],[[8,"title",0]],null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"span",[],[[8,"innerHTML",1]],null,null,null,null)),u["\u0275ppd"](3,2),(l()(),u["\u0275eld"](4,0,null,null,1,"a",[["class","btn btn-transparent"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.undeleteComment()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435"]))],null,function(l,n){var e=n.component;l(n,1,0,((null==e.comment.deleted_by?null:e.comment.deleted_by.username)||"")+" \u0443\u0434\u0430\u043b\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439");var t=u["\u0275unv"](n,2,0,l(n,3,0,u["\u0275nov"](n.parent,1),e.comment.text,"html"));l(n,2,0,t)})}function T(l){return u["\u0275vid"](0,[u["\u0275pid"](0,r.a,[]),u["\u0275pid"](0,s.a,[c.c]),(l()(),u["\u0275eld"](2,0,null,null,21,"div",[["class","inner-wrap"]],[[2,"dummy",null]],null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,2,"a",[["class","user-avatar"],["target","_blank"]],[[2,"online",null],[8,"href",4]],null,null,null,null)),u["\u0275did"](4,737280,null,0,d.a,[u.ElementRef,"UserOnlineService"],{user:[0,"user"]},null),(l()(),u["\u0275eld"](5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u["\u0275eld"](6,0,null,null,17,"div",[["class","content-part"]],null,null,null,null,null)),(l()(),u["\u0275eld"](7,0,null,null,0,"div",[["class","rate-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](8,0,null,null,10,"div",[["class","comment-head"]],null,null,null,null,null)),(l()(),u["\u0275eld"](9,0,null,null,9,"div",[["class","comment-info"]],null,null,null,null,null)),(l()(),u["\u0275eld"](10,0,null,null,1,"a",[["class","element comment-number"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.replyToComment()&&u);return u},null,null)),(l()(),u["\u0275ted"](11,null,["#",""])),(l()(),u["\u0275eld"](12,0,null,null,1,"a",[["class","element user"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),u["\u0275ted"](13,null,["",""])),(l()(),u["\u0275eld"](14,0,null,null,2,"span",[["class","date"]],null,null,null,null,null)),(l()(),u["\u0275ted"](15,null,["",""])),u["\u0275ppd"](16,1),(l()(),u["\u0275and"](16777216,null,null,1,null,R)),u["\u0275did"](18,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](19,0,null,null,4,"div",[["class","comment-body"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,w)),u["\u0275did"](21,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,k)),u["\u0275did"](23,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,4,0,null==e.comment?null:e.comment.author),l(n,18,0,!e.comment.deleted&&(e.hasAccess||e.comment.author.id===(null==e.userService.user?null:e.userService.user.id))),l(n,21,0,!e.comment.deleted),l(n,23,0,e.comment.deleted)},function(l,n){var e=n.component;l(n,2,0,!(null!=e.comment&&e.comment.author)),l(n,3,0,null==e.comment?null:null==e.comment.author?null:e.comment.author.online,u["\u0275inlineInterpolate"](1,"/user/",null==e.comment.author?null:e.comment.author.id,"")),l(n,5,0,u["\u0275inlineInterpolate"](1,"",null==e.comment.author?null:e.comment.author.avatar,"")),l(n,11,0,e.comment.i),l(n,12,0,u["\u0275inlineInterpolate"](1,"/user/",null==e.comment.author?null:e.comment.author.id,"")),l(n,13,0,null==e.comment.author?null:e.comment.author.nickname);var t=u["\u0275unv"](n,15,0,l(n,16,0,u["\u0275nov"](n,0),e.comment.date));l(n,15,0,t)})}u["\u0275ccf"]("gg-comment-light",y,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-comment-light",[],null,null,null,T,S)),u["\u0275did"](1,114688,null,0,y,[g.a,h.a,I.a,C.a,p.b,b.a],null,null)],function(l,n){l(n,1,0)},null)},{comment:"comment",hasAccess:"hasAccess"},{},[]);var E=e("sd3f"),L=e("lHDj"),O=e("+Yz+"),x=e("mIuL"),j=e("zf8C"),P=e("AtGD"),A=e("Rwxb"),M=function(){function l(l,n,e,t,i){this.smileService=l,this.ggUtils=n,this.elementRef=e,this.userService=t,this.popupsService=i,this.onSendMessage=new u.EventEmitter}return l.prototype.onKeyDownTab=function(l){l.preventDefault()},l.prototype.onKeyUpTab=function(l){this.popupsService.toggle(A.a.SMILES)},l.prototype.onKeyDownEnter=function(l){l.preventDefault()},l.prototype.onKeyupEnter=function(l){this.onSendMessage.emit(l.target.innerHTML),l.target.innerHTML=""},l.prototype.onInput=function(l){return m.e(this,void 0,void 0,function(){return m.h(this,function(l){return[2]})})},l.prototype.onPaste=function(l){return m.e(this,void 0,void 0,function(){var n;return m.h(this,function(e){switch(e.label){case 0:return l.preventDefault(),n=l.clipboardData.getData("text/html")||l.clipboardData.getData("text/plain"),[4,this.smileService.parseToText(n)];case 1:return n=e.sent(),n=this.ggUtils.clearHTML(n),[4,this.smileService.parseToSmiles(n,this.premiums)];case 2:return n=e.sent(),document.execCommand("insertHTML",!1,n),this.ggUtils.placeCaretAtEnd(this.elementRef.nativeElement),[2]}})})},l}(),D=function(){function l(l,n,e,t,i){this.popupsService=l,this.elementRef=n,this.ggUtils=e,this.pasteToInputService=t,this.smileService=i,this.sendMessage=new u.EventEmitter,this.popups=A.a}return l.prototype.addNicknameInStartMessage=function(l,n){return-1!=n.indexOf(l+",")?n:l+",&nbsp;"+n},l.prototype.addSmile=function(l,n){return m.e(this,void 0,void 0,function(){var e;return m.h(this,function(u){switch(u.label){case 0:return e=n,[4,this.smileService.parseToSmiles(l,this.premiums)];case 1:return[2,e+u.sent()]}})})},l.prototype.ngOnInit=function(){var l=this;this.input=this.elementRef.nativeElement.querySelector(".textarea"),this.pasteToInputService.onPaste.subscribe(function(n){return m.e(l,void 0,void 0,function(){var l;return m.h(this,function(e){switch(e.label){case 0:return n.type!=p.a.USER?[3,1]:(this.input.innerHTML=this.addNicknameInStartMessage(n.data,this.input.innerText),[3,4]);case 1:return n.type!=p.a.SMILE?[3,3]:(l=this.input,[4,this.addSmile(n.data,this.input.innerHTML)]);case 2:return l.innerHTML=e.sent(),[3,4];case 3:n.type==p.a.COMMENT&&(this.input.innerHTML=n.data+this.input.innerHTML),e.label=4;case 4:return this.ggUtils.placeCaretAtEnd(this.input),[2]}})})})},l.prototype.onSendMessage=function(l){""!==(l=l.replace(/&nbsp;/g," ")).trim()&&(l=this.smileService.parseToText(l),this.sendMessage.emit(l))},l.prototype.onClickPopupSmiles=function(){this.popupsService.toggle(A.a.SMILES)},l}(),V=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function G(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"div",[["class","text-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,0,"a",[["class","control icon icon-smilemenu-icon smiles"]],[[2,"active",null]],[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.onClickPopupSmiles()&&u);return u},null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"div",[["chatInput",""],["class","textarea textarea_comment-photo"],["contenteditable","true"],["placeholder","\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435..."]],null,[[null,"onSendMessage"],[null,"keyup.enter"],[null,"keydown.enter"],[null,"input"],[null,"keydown.tab"],[null,"keyup.tab"],[null,"paste"]],function(l,n,e){var t=!0,i=l.component;"keyup.enter"===n&&(t=!1!==u["\u0275nov"](l,3).onKeyupEnter(e)&&t);"keydown.enter"===n&&(t=!1!==u["\u0275nov"](l,3).onKeyDownEnter(e)&&t);"input"===n&&(t=!1!==u["\u0275nov"](l,3).onInput(e)&&t);"keydown.tab"===n&&(t=!1!==u["\u0275nov"](l,3).onKeyDownTab(e)&&t);"keyup.tab"===n&&(t=!1!==u["\u0275nov"](l,3).onKeyUpTab(e)&&t);"paste"===n&&(t=!1!==u["\u0275nov"](l,3).onPaste(e)&&t);"onSendMessage"===n&&(t=!1!==i.onSendMessage(e)&&t);return t},null,null)),u["\u0275did"](3,16384,null,0,M,[g.a,I.a,u.ElementRef,C.a,L.a],null,{onSendMessage:"onSendMessage"})],null,function(l,n){var e=n.component;l(n,1,0,e.popupsService.checkPopup(e.popups.SMILES))})}u["\u0275ccf"]("chat-send",D,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"chat-send",[],null,null,null,G,V)),u["\u0275did"](1,114688,null,0,D,[L.a,u.ElementRef,I.a,p.b,g.a],null,null)],function(l,n){l(n,1,0)},null)},{premiums:"premiums"},{sendMessage:"sendMessage"},[]),e("0DeG"),e("l8vd");var _=e("S5bw"),H=e("Gi3i"),$=e("15JJ"),Y=function(){function l(l,n,e,u,t,i){this.commentsLightService=l,this.commentsUpdateService=n,this.holder=e,this.popupsService=u,this.userService=t,this.userPremiumService=i,this.comments=[],this.info=new f.b,this.limit=25,this.commentsLoaded=!1,this.isCloseComment=!1,this.popups=A.a,this.getComments$=new _.a(1),this.userPremiumService.load()}return l.prototype.ngOnInit=function(){var l=this;this.getComments$.pipe(Object(H.a)(100),Object($.a)(function(){return l.loadPage()})).subscribe(function(n){l.commentsLoaded=!0,l.setComments(n)},function(n){return l.isCloseComment=!0})},l.prototype.ngOnChanges=function(){var l=this;this.objId&&this.objType&&(this.getComments$.next(),this.commentsUpdateService.subscribeNewComments(this.objKey,function(n){return l.parseCommentEvent(n)}))},l.prototype.loadNextPages=function(){this.limit+=25},l.prototype.sendComment=function(l){var n=this;this.userService.user?(this.info.cqty=+this.info.cqty+1,this.commentsLightService.sendComment({objType:this.objType,objId:this.objId,id:0,comment:l,all:1}).$observable.subscribe(function(l){return n.setComments(l)})):this.userService.showLogin("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438.")},l.prototype.setComments=function(l){var n=this;this.limit+=1,this.comments=l.comments.slice(),this.info=l.info,this.scroll.scrollToBottom(function(){return n.limit=25}),this.holder.put("comments-"+this.objType+":"+this.objId,l)},l.prototype.loadPage=function(l){var n={objId:this.objId,objType:this.objType,page:l,all:1};return this.commentsLightService.getComments(n).$observable},l.prototype.parseCommentEvent=function(l){+l.cqty!=+this.info.cqty&&this.getComments$.next()},l}(),q=e("QlWe"),K=e("kqOZ"),U=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Z(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"div",[["class","comment-empty"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,1,"div",[["class","img-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,0,"img",[["src","/images/premium/doggie-0.png"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,[" \u041f\u043e\u043a\u0430 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u044d\u0442\u043e\u0439 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0442\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c! "]))],null,null)}function F(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"div",[["class","comment-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,1,"gg-comment-light",[],null,null,null,T,S)),u["\u0275did"](2,114688,null,0,y,[g.a,h.a,I.a,C.a,p.b,b.a],{comment:[0,"comment"],hasAccess:[1,"hasAccess"]},null)],function(l,n){var e=n.component;l(n,2,0,n.context.$implicit,e.hasAccess)},null)}function N(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"gg-smiles",[],null,null,null,E.c,E.a)),u["\u0275prd"](512,null,L.a,L.a,[]),u["\u0275did"](2,114688,null,0,O.a,[g.a,b.a,p.b,L.a],null,null)],function(l,n){l(n,2,0)},null)}function Q(l){return u["\u0275vid"](0,[u["\u0275pid"](0,x.a,[]),u["\u0275qud"](402653184,1,{scroll:0}),(l()(),u["\u0275eld"](2,0,null,null,17,"div",[["class","chat-container big-smiles animated-smiles chat-container_photo"]],null,null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,16,"div",[["class","dashboard-block comments-block light"]],null,null,null,null,null)),(l()(),u["\u0275eld"](4,0,null,null,7,"div",[["class","comment-list"]],[[2,"loading",null]],null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,Z)),u["\u0275did"](6,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](7,0,null,null,4,"gg-scroller",[],null,[[null,"topElement"]],function(l,n,e){var u=!0,t=l.component;"topElement"===n&&(u=!1!==t.loadNextPages()&&u);return u},j.b,j.a)),u["\u0275did"](8,114688,[[1,4]],0,P.a,[u.ElementRef,u.NgZone],null,{topElement:"topElement"}),(l()(),u["\u0275and"](16777216,null,0,2,null,F)),u["\u0275did"](10,278528,null,0,i.n,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),u["\u0275ppd"](11,2),(l()(),u["\u0275eld"](12,0,null,null,2,"div",[["class","popup-wrap"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,N)),u["\u0275did"](14,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](15,0,null,null,4,"div",[["class","chat-control-block chat-control-block_photo"]],null,null,null,null,null)),(l()(),u["\u0275eld"](16,0,null,null,1,"a",[["class","user-avatar user"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),u["\u0275eld"](17,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u["\u0275eld"](18,0,null,null,1,"chat-send",[],null,[[null,"sendMessage"]],function(l,n,e){var u=!0,t=l.component;"sendMessage"===n&&(u=!1!==t.sendComment(e)&&u);return u},G,V)),u["\u0275did"](19,114688,null,0,D,[L.a,u.ElementRef,I.a,p.b,g.a],null,{sendMessage:"sendMessage"})],function(l,n){var e=n.component;l(n,6,0,e.commentsLoaded&&0==(null==e.comments?null:e.comments.length)),l(n,8,0);var t=u["\u0275unv"](n,10,0,l(n,11,0,u["\u0275nov"](n,0),e.comments,e.limit));l(n,10,0,t),l(n,14,0,e.popupsService.checkPopup(e.popups.SMILES)),l(n,19,0)},function(l,n){var e=n.component;l(n,4,0,!e.commentsLoaded),l(n,16,0,u["\u0275inlineInterpolate"](1,"/user/",null==e.userService?null:null==e.userService.user?null:e.userService.user.id,"")),l(n,17,0,null!=e.userService&&e.userService.user?e.userService.user.avatar:"/files/avatars/avatar.png")})}u["\u0275ccf"]("gg-comments-light",Y,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-comments-light",[],null,null,null,Q,U)),u["\u0275did"](1,638976,null,0,Y,[h.a,q.a,K.a,L.a,C.a,b.a],null,null)],function(l,n){l(n,1,0)},null)},{objType:"objType",objId:"objId",objKey:"objKey",hasAccess:"hasAccess"},{},[]);var B=e("TiK0"),J=e("/JgG"),W=e("9jgm"),X=e("gIcY"),z=e("uX74"),ll=e("eqxy"),nl=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function el(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"a",[["class","element"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.toggleEditing()&&u);return u},null,null)),(l()(),u["\u0275eld"](1,0,null,null,0,"span",[["class","icon icon-edit-comment"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c"]))],null,null)}function ul(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"a",[["class","element"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.photoDeleted.emit()&&u);return u},null,null)),(l()(),u["\u0275eld"](1,0,null,null,0,"span",[["class","icon icon-trashcan2"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]))],null,null)}function tl(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-complaint",[["color","blue"]],null,[[null,"close"]],function(l,n,e){var u=!0,t=l.component;"close"===n&&(u=!1!=(t.isOpenComplaint=!1)&&u);return u},B.b,B.a)),u["\u0275did"](1,114688,null,0,J.a,[W.a,C.a],{userId:[0,"userId"],objType:[1,"objType"],objId:[2,"objId"],color:[3,"color"]},{close:"close"})],function(l,n){var e=n.component;l(n,1,0,e.userId,16,e.album.images[e.activePhotoIndex].id,"blue")},null)}function il(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,20,null,null,null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,2,"div",[["class","title-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"div",[["class","slide-name"]],null,null,null,null,null)),(l()(),u["\u0275ted"](3,null,["",""])),(l()(),u["\u0275eld"](4,0,null,null,16,"div",[["class","edit-block"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,el)),u["\u0275did"](6,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](7,0,null,null,3,"a",[["class","element"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.toggleComplain()&&u);return u},null,null)),(l()(),u["\u0275eld"](8,0,null,null,0,"span",[["class","icon icon-report-comment"]],null,null,null,null,null)),(l()(),u["\u0275eld"](9,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0416\u0430\u043b\u043e\u0431\u0430 \u043d\u0430 \u0444\u043e\u0442\u043e"])),(l()(),u["\u0275eld"](11,0,null,null,3,"a",[["class","element"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),u["\u0275eld"](12,0,null,null,0,"span",[["class","icon icon-download-img"]],null,null,null,null,null)),(l()(),u["\u0275eld"](13,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b"])),(l()(),u["\u0275and"](16777216,null,null,1,null,ul)),u["\u0275did"](16,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,tl)),u["\u0275did"](18,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](19,0,null,null,1,"div",[],null,[[null,"ggClickOutside"],["document","mousedown"]],function(l,n,e){var t=!0,i=l.component;"document:mousedown"===n&&(t=!1!==u["\u0275nov"](l,20).clickHandler(e,e.target)&&t);"ggClickOutside"===n&&(t=!1!=(i.isOpenComplaint=!1)&&t);return t},null,null)),u["\u0275did"](20,16384,null,0,o.a,[u.ElementRef],{ignoreElements:[0,"ignoreElements"]},{event:"ggClickOutside"})],function(l,n){var e=n.component;l(n,6,0,e.hasAccess),l(n,16,0,e.hasAccess),l(n,18,0,e.isOpenComplaint);l(n,20,0,".report-popup")},function(l,n){var e=n.component;l(n,3,0,e.album.images[e.activePhotoIndex].title||"\u0424\u043e\u0442\u043e "+(e.activePhotoIndex+1)),l(n,11,0,u["\u0275inlineInterpolate"](1,"",e.album.images[e.activePhotoIndex].src,""))})}function ol(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,10,"div",[["class","title-block edit"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var t=!0,i=l.component;"input"===n&&(t=!1!==u["\u0275nov"](l,2)._handleInput(e.target.value)&&t);"blur"===n&&(t=!1!==u["\u0275nov"](l,2).onTouched()&&t);"compositionstart"===n&&(t=!1!==u["\u0275nov"](l,2)._compositionStart()&&t);"compositionend"===n&&(t=!1!==u["\u0275nov"](l,2)._compositionEnd(e.target.value)&&t);"ngModelChange"===n&&(t=!1!==(i.title=e)&&t);return t},null,null)),u["\u0275did"](2,16384,null,0,X.d,[u.Renderer2,u.ElementRef,[2,X.a]],null,null),u["\u0275prd"](1024,null,X.q,function(l){return[l]},[X.d]),u["\u0275did"](4,671744,null,0,X.v,[[8,null],[8,null],[8,null],[6,X.q]],{model:[0,"model"]},{update:"ngModelChange"}),u["\u0275prd"](2048,null,X.r,null,[X.v]),u["\u0275did"](6,16384,null,0,X.s,[[4,X.r]],null,null),(l()(),u["\u0275eld"](7,0,null,null,1,"a",[["class","btn btn-blue"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.saveNewTitle()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"])),(l()(),u["\u0275eld"](9,0,null,null,1,"a",[["class","btn btn-gray"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.toggleEditing()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u041e\u0442\u043c\u0435\u043d\u0430"]))],function(l,n){l(n,4,0,n.component.title)},function(l,n){l(n,1,0,u["\u0275nov"](n,6).ngClassUntouched,u["\u0275nov"](n,6).ngClassTouched,u["\u0275nov"](n,6).ngClassPristine,u["\u0275nov"](n,6).ngClassDirty,u["\u0275nov"](n,6).ngClassValid,u["\u0275nov"](n,6).ngClassInvalid,u["\u0275nov"](n,6).ngClassPending)})}function al(l){return u["\u0275vid"](0,[u["\u0275pid"](0,i.e,[u.LOCALE_ID]),(l()(),u["\u0275eld"](1,0,null,null,9,"div",[["class","gallery-info"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"div",[["class","count-block"]],null,null,null,null,null)),(l()(),u["\u0275ted"](3,null,[""," \u0438\u0437 ",""])),(l()(),u["\u0275eld"](4,0,null,null,2,"div",[["class","upload-date"]],null,null,null,null,null)),(l()(),u["\u0275ted"](5,null,["",""])),u["\u0275ppd"](6,2),(l()(),u["\u0275and"](16777216,null,null,1,null,il)),u["\u0275did"](8,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,ol)),u["\u0275did"](10,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,8,0,!e.isEditing),l(n,10,0,e.isEditing)},function(l,n){var e=n.component;l(n,3,0,e.activePhotoIndex+1,e.album.images.length);var t=u["\u0275unv"](n,5,0,l(n,6,0,u["\u0275nov"](n,0),e.album.images[e.activePhotoIndex].date,"dd.MM.yyyy"));l(n,5,0,t)})}u["\u0275ccf"]("gg-gallery-album-photo-control",z.a,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-gallery-album-photo-control",[],null,null,null,al,nl)),u["\u0275did"](1,573440,null,0,z.a,[ll.a],null,null)],null,null)},{album:"album",activePhotoIndex:"activePhotoIndex",hasAccess:"hasAccess",userId:"userId"},{photoDeleted:"photoDeleted"},[]);var rl=e("PJQC"),sl=e("l1nV"),cl=e("Ke3l");e.d(n,"a",function(){return fl});var dl=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ml(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,4,"div",[["class","gallery-control"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,1,"a",[["class","left"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.shift(-1)&&u);return u},null,null)),(l()(),u["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-gallery-left"]],null,null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,1,"a",[["class","right"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.shift(1)&&u);return u},null,null)),(l()(),u["\u0275eld"](4,0,null,null,0,"span",[["class","icon icon-gallery-right"]],null,null,null,null,null))],null,null)}function pl(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"img",[["alt",""]],null,[[null,"error"]],function(l,n,e){var t=!0;"error"===n&&(t=!1!==u["\u0275nov"](l,1).onError(e)&&t);return t},null,null)),u["\u0275did"](1,540672,null,0,t.a,[u.ElementRef],{src:[0,"src"],srcImage:[1,"srcImage"]},null)],function(l,n){l(n,1,0,n.parent.context.$implicit.bigSrc,n.parent.context.$implicit.src)},null)}function gl(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"div",[["class","slide"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,pl)),u["\u0275did"](2,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,n.context.index>=e.index-1&&n.context.index<=e.index+1)},null)}function hl(l){return u["\u0275vid"](0,[u["\u0275qud"](402653184,1,{swiperContainer:0}),u["\u0275qud"](402653184,2,{controlComponent:0}),(l()(),u["\u0275eld"](2,0,null,null,17,"div",[["class","popup-block gallery-new show"]],null,null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,16,"div",[["class","gallery-wrap"],["ggDocumentEvent",""]],null,[[null,"ggClickOutside"],[null,"escape"],[null,"arrowleft"],[null,"arrowright"],["document","mousedown"],["document","keyup.escape"],["document","keyup.arrowleft"],["document","keyup.arrowright"]],function(l,n,e){var t=!0,i=l.component;"document:mousedown"===n&&(t=!1!==u["\u0275nov"](l,4).clickHandler(e,e.target)&&t);"document:keyup.escape"===n&&(t=!1!==u["\u0275nov"](l,5).clickEsc(e)&&t);"document:keyup.arrowleft"===n&&(t=!1!==u["\u0275nov"](l,5).clickLeft(e)&&t);"document:keyup.arrowright"===n&&(t=!1!==u["\u0275nov"](l,5).clickRight(e)&&t);"ggClickOutside"===n&&(t=!1!==i.close()&&t);"escape"===n&&(t=!1!==i.close()&&t);"arrowleft"===n&&(t=!1!==i.shift(-1)&&t);"arrowright"===n&&(t=!1!==i.shift(1)&&t);return t},null,null)),u["\u0275did"](4,16384,null,0,o.a,[u.ElementRef],{ignoreElements:[0,"ignoreElements"]},{event:"ggClickOutside"}),u["\u0275did"](5,16384,null,0,a.a,[u.ElementRef],{ignoreElements:[0,"ignoreElements"]},{escape:"escape",arrowleft:"arrowleft",arrowright:"arrowright"}),(l()(),u["\u0275eld"](6,0,null,null,0,"a",[["class","close icon icon-close2"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.close()&&u);return u},null,null)),(l()(),u["\u0275eld"](7,0,null,null,2,"div",[["class","chat-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](8,0,null,null,1,"gg-comments-light",[],null,null,null,Q,U)),u["\u0275did"](9,638976,null,0,Y,[h.a,q.a,K.a,L.a,C.a,b.a],{objType:[0,"objType"],objId:[1,"objId"],objKey:[2,"objKey"],hasAccess:[3,"hasAccess"]},null),(l()(),u["\u0275eld"](10,0,null,null,9,"div",[["class","gallery-part"]],null,null,null,null,null)),(l()(),u["\u0275eld"](11,0,null,null,8,"div",[["class","gallery-slider-wrap"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,ml)),u["\u0275did"](13,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](14,0,null,null,3,"div",[["class","gallery-slider-inner-wrap"]],null,null,null,null,null)),(l()(),u["\u0275eld"](15,0,[[1,0],["content",1]],null,2,"div",[["class","gallery-slider"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,gl)),u["\u0275did"](17,278528,null,0,i.n,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),u["\u0275eld"](18,0,null,null,1,"gg-gallery-album-photo-control",[],null,[[null,"photoDeleted"]],function(l,n,e){var u=!0,t=l.component;"photoDeleted"===n&&(u=!1!==t.deletePhoto()&&u);return u},al,nl)),u["\u0275did"](19,573440,[[2,4],["control",4]],0,z.a,[ll.a],{album:[0,"album"],activePhotoIndex:[1,"activePhotoIndex"],hasAccess:[2,"hasAccess"]},{photoDeleted:"photoDeleted"})],function(l,n){var e=n.component;l(n,4,0,".login-wrap-big");l(n,5,0,"#smiles");l(n,9,0,16,e.inputData.album.images[e.index].id,e.inputData.album.images[e.index].obj_key,e.inputData.hasAccess),l(n,13,0,1!=e.inputData.album.images.length),l(n,17,0,e.inputData.album.images),l(n,19,0,e.inputData.album,e.index,e.inputData.hasAccess)},null)}var fl=u["\u0275ccf"]("gg-gallery-album-photo",rl.a,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-gallery-album-photo",[],null,null,null,hl,dl)),u["\u0275did"](1,114688,null,0,rl.a,[sl.a,u.Renderer2,cl.a,ll.a],null,null)],function(l,n){l(n,1,0)},null)},{inputData:"inputData"},{},[])},QTQN:function(l,n,e){"use strict";e.d(n,"a",function(){return r});var u=e("CcnG"),t=e("WRQX"),i=e("l1nV"),o=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function a(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,6,"div",[["id","block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,5,"div",[["class","popup-block dragndrop"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,4,"div",[["class","block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,0,"img",[["alt",""],["class","commander"],["src","/images/drag-n-drop-icon.png"]],null,null,null,null,null)),(l()(),u["\u0275eld"](4,0,null,null,0,"img",[["alt",""],["class","cloud"],["src","/images/svg/big-cloud-icon.svg"]],null,null,null,null,null)),(l()(),u["\u0275eld"](5,0,null,null,1,"div",[["class","text-block"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441\u044e\u0434\u0430"]))],null,null)}var r=u["\u0275ccf"]("gg-drag-n-drop",t.a,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-drag-n-drop",[],null,null,null,a,o)),u["\u0275did"](1,114688,null,0,t.a,[i.a],null,null)],function(l,n){l(n,1,0)},null)},{},{},[])},WRQX:function(l,n,e){"use strict";e.d(n,"a",function(){return u});e("awt7");var u=function(){function l(l){this.modalService=l}return l.prototype.ngOnInit=function(){},l}()},dOF8:function(l,n,e){"use strict";var u=function(){return function(){this.key=0,this.hasAccess=!1,this.draggable="",this.ghostClass="",this.setTimeout=0}}();e.d(n,"a",function(){return u})},hQgk:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var u=function(){function l(){this.options=[]}return l.prototype.getOptions=function(l){var n,e=0,u=0;return this.options[l.key]||(this.options[l.key]={onUpdate:function(n){return l.onUpdate(n)},onMove:function(t,i){return e===i.offsetX+i.offsetY?n=setTimeout(function(){return u=1},l.setTimeout):(clearTimeout(n),u=0),e=i.offsetX+i.offsetY,!!u},disabled:!l.hasAccess,draggable:l.hasAccess?l.draggable:"",animation:100,sort:!0},l.ghostClass&&Object.assign(this.options[l.key],{ghostClass:l.ghostClass}),-1==+l.key&&Object.assign(this.options[l.key],{draggable:""})),this.options[l.key]},l.prototype.sortByInternalId=function(l){var n=[];return l.forEach(function(l,e){l.internal_id!==e+1&&l.id>0&&(l.internal_id=e+1,n.push(l))}),n},l}()},sWus:function(l,n,e){"use strict";e("hQgk")},"w8/j":function(l,n,e){"use strict";var u=e("CcnG"),t=e("ZYCi"),i=e("Ip0R"),o=e("FqKG"),a=e("bDe0"),r=e("2Hcd"),s=e("gIcY"),c=e("PwDV"),d=e("Ps8t"),m=e("5tJs"),p=e("rpZH"),g=e("mN3k"),h=e("B79z"),f=e("ZYjt"),v=e("p4IN"),b=e("M320"),y=e("t4VC"),I=e("pwFB"),C=e("RqDB"),S=e("97z0"),R=e("9EIw"),w=e("hQgk"),k=e("UqgQ"),T=e("mrSG"),E=e("10wG"),L=e("EREx"),O=e("eqxy"),x=e("PJQC"),j=(e("awt7"),e("xfl0")),P=(e("mSP8"),e("sWus"),e("dOF8")),A=e("Ke3l"),M=e("8yZx"),D=(e("l8vd"),e("4UeT")),V=e("WRQX"),G=function(){function l(l,n,e,u,t,i,o,a,r){this.modalService=l,this.userGalleryService=n,this.multipartSendService=e,this.dragSortOptionService=u,this.galleryRouterService=t,this._ngZone=i,this.imgValidService=o,this.holder=a,this.titleService=r,this.album=new E.a(j.a.factory(E.c,10)),this.ObjType=M.b,this.newTitle="",this.changingTitle=!1,this.errorHandler=new D.a,this.galleryErrors=D.b,this.privacyModer=!1,this.isLoaded=!1,this.imageCount=20,this.imagesOnPage=20}return l.prototype.ngOnChanges=function(l){var n=this;void 0!==l.hasAccess.currentValue&&(this.options=this.getOptions()),l.albumInfo&&l.albumInfo.currentValue&&(this.album=this.albumInfo.album,this.album.title=this.album.title||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",this.isLoaded=!0,this.titleService.setTitle("\u0413\u0430\u043b\u0435\u0440\u0435\u0438 "+this.albumInfo.obj.name+" / "+this.album.title),this.photoId&&this.album&&(this.album.images.some(function(l){return+l.id==+n.photoId})?this.openModalWindowByPhotoId(this.photoId):this.galleryRouterService.navigateTo404()))},l.prototype.openModalWindowByPhotoId=function(l){this.modalService.open(x.a,{photoId:l,album:this.album,hasAccess:this.hasAccess})},l.prototype.getOptions=function(){var l=this,n=new P.a;return n.hasAccess=this.hasAccess,n.onUpdate=function(){return l.saveSortObject(!0)},n.draggable=".photo-block",n.ghostClass="placeholder",this.dragSortOptionService.getOptions(n)},l.prototype.saveSortObject=function(l){var n=this;void 0===l&&(l=!1);var e=this.album.images;if(e&&e.length){var u=this.dragSortOptionService.sortByInternalId(e),t=[];u.forEach(function(l){return t.push({id:l.id,internal_id:l.internal_id})}),this._ngZone.run(function(){n.userGalleryService.sortImages({albumId:n.album.id,photos:t}).$observable.subscribe(function(e){l&&n.errorHandler.onSuccess(n.galleryErrors.GALLERY_SORT)},function(l){return n.errorHandler.onError(n.galleryErrors.GALLERY_SORT)})})}},l.prototype.changePrivacy=function(l){var n=this;this.album.private=l,this.userGalleryService.changePrivacy({albumId:this.album.id,private:l}).$observable.subscribe(function(l){return n.errorHandler.onSuccess(n.galleryErrors.GALLERY_PRIVACY)},function(l){return n.errorHandler.onError(n.galleryErrors.GALLERY_PRIVACY)}),this.privacyModer=!!this.album.private},l.prototype.addPhoto=function(){return T.e(this,void 0,void 0,function(){var l,n=this;return T.h(this,function(e){switch(e.label){case 0:return this.images.length?[4,this.validatePhoto()]:[2];case 1:return(l=e.sent())!==D.b.NO_ERROR?(this.errorHandler.onError(l),[2]):(this.images.forEach(function(l,e){return n.loadPhoto(e,l)}),[2])}})})},l.prototype.validatePhoto=function(){return T.e(this,void 0,void 0,function(){var l,n=this;return T.h(this,function(e){return l=M.a.defaultFormats,this.images.every(function(e){return n.imgValidService.validFormat(e,l)})?[2,D.b.NO_ERROR]:[2,D.b.GALLERY_FORMAT]})})},l.prototype.loadPhoto=function(l,n){return T.e(this,void 0,void 0,function(){var e,u;return T.h(this,function(t){switch(t.label){case 0:(e=[]).push({name:"file_1",value:n}),this.album.images.unshift(new E.c(!0)),this.imageCount+=1,e.push({name:"count",value:"1"}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.userGalleryService.sendFile("gallery/"+this.album.id,e).toPromise()];case 2:return u=t.sent(),this.album.images[l]=u[0],this.album.images=this.album.images.slice(),this.albumInfo.album=this.album,this.holder.put("album-"+this.album.id+"/obj",this.albumInfo),this.saveSortObject(),this.errorHandler.clear(),[3,4];case 3:return t.sent(),this.errorHandler.onError(this.galleryErrors.GALLERY_SERVER),this.imageCount-=this.images.length,this.album.images=this.album.images.filter(function(l){return l.src}),[3,4];case 4:return[2]}})})},l.prototype.saveTitle=function(){var l=this;this.userGalleryService.changeTitle({id:this.album.id,title:this.newTitle}).$observable.subscribe(function(n){l.album=n,l.changingTitle=!1})},l.prototype.cancel=function(){this.changingTitle=!1},l.prototype.changeTitle=function(){this.newTitle=this.album.title,this.changingTitle=!0},l.prototype.deleteGallery=function(){var l=this;if(window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e?"))this.userGalleryService.remove({id:this.album.id}).$observable.subscribe(function(){l.galleryRouterService.navigateToUserGalleries(l.albumInfo.obj.id)})},l.prototype.showMore=function(){this.imageCount+=this.imagesOnPage},l.prototype.openDrag=function(){this.modalService.open(V.a)},l.prototype.leaveDrag=function(){this.modalService.close()},l}(),_=e("l1nV"),H=e("kqOZ"),$=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Y(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,1,"a",[["class","link-back"]],[[8,"href",4]],null,null,null,null)),(l()(),u["\u0275ted"](2,null,["\u041f\u0440\u043e\u0444\u0438\u043b\u044c ",""])),(l()(),u["\u0275eld"](3,0,null,null,0,"span",[["class","icon icon-arrow-right"]],null,null,null,null,null))],null,function(l,n){var e=n.component;l(n,1,0,u["\u0275inlineInterpolate"](1,"/user/",null==e.albumInfo?null:e.albumInfo.obj.id,"")),l(n,2,0,null==e.albumInfo?null:e.albumInfo.obj.name)})}function q(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==u["\u0275nov"](l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t);return t},null,null)),u["\u0275did"](1,671744,null,0,t.q,[t.o,t.a,i.k],{routerLink:[0,"routerLink"]},null),(l()(),u["\u0275ted"](-1,null,["\u0412\u0441\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u0438"]))],function(l,n){var e=n.component;l(n,1,0,u["\u0275inlineInterpolate"](1,"/user/",null==e.albumInfo?null:e.albumInfo.obj.id,"/galleries"))},function(l,n){l(n,0,0,u["\u0275nov"](n,1).target,u["\u0275nov"](n,1).href)})}function K(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"a",[["routerLink","/news/galleries"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==u["\u0275nov"](l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t);return t},null,null)),u["\u0275did"](1,671744,null,0,t.q,[t.o,t.a,i.k],{routerLink:[0,"routerLink"]},null),(l()(),u["\u0275ted"](-1,null,["\u0412\u0441\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u0438"]))],function(l,n){l(n,1,0,"/news/galleries")},function(l,n){l(n,0,0,u["\u0275nov"](n,1).target,u["\u0275nov"](n,1).href)})}function U(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430"]))],null,null)}function Z(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0444\u043e\u0442\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"]))],null,null)}function F(l){return u["\u0275vid"](0,[(l()(),u["\u0275and"](0,null,null,0))],null,null)}function N(l){return u["\u0275vid"](0,[(l()(),u["\u0275and"](0,null,null,0,null,F))],null,null)}function Q(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,8,"div",[["class","system-message success smooth"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,7,null,null,null,null,null,null,null)),u["\u0275did"](2,16384,null,0,i.s,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,U)),u["\u0275did"](4,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,Z)),u["\u0275did"](6,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,N)),u["\u0275did"](8,16384,null,0,i.u,[u.ViewContainerRef,u.TemplateRef,i.s],null,null)],function(l,n){var e=n.component;l(n,2,0,null==e.errorHandler?null:e.errorHandler.code),l(n,4,0,e.galleryErrors.GALLERY_PRIVACY),l(n,6,0,e.galleryErrors.GALLERY_SORT)},null)}function B(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u0438"]))],null,null)}function J(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u043f\u043e\u0440\u044f\u0434\u043a\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439"]))],null,null)}function W(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e JPEG, GIF, PNG \u0438\u043b\u0438 JPG"]))],null,null)}function X(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 4096x3072 (4k)"]))],null,null)}function z(l){return u["\u0275vid"](0,[(l()(),u["\u0275ted"](-1,null,["\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"]))],null,null)}function ll(l){return u["\u0275vid"](0,[(l()(),u["\u0275and"](0,null,null,0))],null,null)}function nl(l){return u["\u0275vid"](0,[(l()(),u["\u0275and"](0,null,null,0,null,ll))],null,null)}function el(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,14,"div",[["class","system-message error smooth"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,13,null,null,null,null,null,null,null)),u["\u0275did"](2,16384,null,0,i.s,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,B)),u["\u0275did"](4,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,J)),u["\u0275did"](6,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,W)),u["\u0275did"](8,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,X)),u["\u0275did"](10,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,z)),u["\u0275did"](12,278528,null,0,i.t,[u.ViewContainerRef,u.TemplateRef,i.s],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,nl)),u["\u0275did"](14,16384,null,0,i.u,[u.ViewContainerRef,u.TemplateRef,i.s],null,null)],function(l,n){var e=n.component;l(n,2,0,null==e.errorHandler?null:e.errorHandler.code),l(n,4,0,e.galleryErrors.GALLERY_PRIVACY),l(n,6,0,e.galleryErrors.GALLERY_SORT),l(n,8,0,e.galleryErrors.GALLERY_FORMAT),l(n,10,0,e.galleryErrors.GALLERY_SIZE),l(n,12,0,e.galleryErrors.GALLERY_SERVER)},null)}function ul(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,2,"div",[["class","system-message system"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,[" \u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u0438 "])),(l()(),u["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-close2"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!=(t.privacyModer=!1)&&u);return u},null,null))],null,null)}function tl(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,22,"div",[["class","control-panel"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,2,"label",[["for","add"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,1,"a",[["class","btn btn-green"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"])),(l()(),u["\u0275eld"](4,0,null,null,1,"input",[["ggImageLoad",""],["id","add"],["multiple",""],["style","display: none"],["type","file"]],null,[[null,"change"],[null,"srcChange"],[null,"fileChange"]],function(l,n,e){var t=!0,i=l.component;"change"===n&&(t=!1!==u["\u0275nov"](l,5).onChange(e)&&t);"change"===n&&(t=!1!==i.addPhoto()&&t);"srcChange"===n&&(t=!1!==(i.src=e)&&t);"fileChange"===n&&(t=!1!==(i.images=e)&&t);return t},null,null)),u["\u0275did"](5,16384,null,0,o.a,[u.ElementRef,a.a],{file:[0,"file"],src:[1,"src"]},{fileChange:"fileChange",srcChange:"srcChange"}),(l()(),u["\u0275eld"](6,0,null,null,1,"a",[["class","btn btn-blue test"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.changeTitle()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u0438"])),(l()(),u["\u0275eld"](8,0,null,null,10,"div",[["class","gallery-dropdown"]],null,null,null,null,null)),(l()(),u["\u0275eld"](9,0,null,null,9,"gg-dropdown",[],[[2,"disabled",null],[2,"dropdown",null],[2,"dark",null],[2,"blue",null],[2,"transparent",null],[2,"open",null]],[[null,"valueChange"],[null,"click"],[null,"ggClickOutside"]],function(l,n,e){var t=!0,i=l.component;"click"===n&&(t=!1!==u["\u0275nov"](l,11).toggle()&&t);"ggClickOutside"===n&&(t=!1!==u["\u0275nov"](l,11).onOutsideClick()&&t);"valueChange"===n&&(t=!1!==i.changePrivacy(e)&&t);return t},r.b,r.a)),u["\u0275prd"](5120,null,s.q,function(l){return[l]},[c.a]),u["\u0275did"](11,1753088,null,1,c.a,[u.ChangeDetectorRef,d.a],{value:[0,"value"]},{valueChange:"valueChange"}),u["\u0275qud"](603979776,1,{options:1}),(l()(),u["\u0275eld"](13,0,null,null,2,"gg-option",[],null,null,null,m.b,m.a)),u["\u0275did"](14,114688,[[1,4]],0,p.a,[u.ElementRef],{value:[0,"value"]},null),(l()(),u["\u0275ted"](-1,0,["\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u0432\u0438\u0434\u043d\u0430 \u0432\u0441\u0435\u043c"])),(l()(),u["\u0275eld"](16,0,null,null,2,"gg-option",[],null,null,null,m.b,m.a)),u["\u0275did"](17,114688,[[1,4]],0,p.a,[u.ElementRef],{value:[0,"value"]},null),(l()(),u["\u0275ted"](-1,0,["\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u0432\u0438\u0434\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u043d\u0435"])),(l()(),u["\u0275and"](16777216,null,null,1,null,ul)),u["\u0275did"](20,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](21,0,null,null,1,"a",[["class","btn btn-gray btn-gallery pull-right"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.deleteGallery()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e"]))],function(l,n){var e=n.component;l(n,5,0,e.images,e.src),l(n,11,0,e.album.private);l(n,14,0,0);l(n,17,0,1),l(n,20,0,e.privacyModer)},function(l,n){l(n,9,0,u["\u0275nov"](n,11).disabledValue,!0,"dark"===u["\u0275nov"](n,11).color,"blue"===u["\u0275nov"](n,11).color,"transparent"===u["\u0275nov"](n,11).color,u["\u0275nov"](n,11).isOpened)})}function il(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,4,"div",[["class","photo-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,3,"div",[["class","photo-wrap"]],[[2,"placeholder",null],[2,"loading",null]],null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,2,"a",[],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.openModalWindowByPhotoId(null==l.context.$implicit?null:l.context.$implicit.id)&&u);return u},null,null)),(l()(),u["\u0275eld"](3,0,null,null,1,"img",[["alt",""],["class","photo"]],[[8,"title",0]],[[null,"load"],[null,"error"]],function(l,n,e){var t=!0;"error"===n&&(t=!1!==u["\u0275nov"](l,4).onError(e)&&t);"load"===n&&(t=!1!=(l.context.$implicit.loaded=!0)&&t);return t},null,null)),u["\u0275did"](4,540672,null,0,g.a,[u.ElementRef],{src:[0,"src"],srcImage:[1,"srcImage"]},null)],function(l,n){l(n,4,0,null==n.context.$implicit?null:n.context.$implicit.src,(null==n.context.$implicit?null:n.context.$implicit.preview)||"")},function(l,n){l(n,1,0,!(null!=n.context.$implicit&&n.context.$implicit.preview&&null!=n.context.$implicit&&n.context.$implicit.loaded),null==n.context.$implicit?null:n.context.$implicit.loading),l(n,3,0,u["\u0275inlineInterpolate"](1,"",(null==n.context.$implicit?null:n.context.$implicit.title)||"\u0424\u043e\u0442\u043e "+(n.context.index+1),""))})}function ol(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,4,"div",[["class","empty-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,1,"div",[["class","img-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](2,0,null,null,0,"img",[["src","/images/premium/doggie-0.png"]],null,null,null,null,null)),(l()(),u["\u0275eld"](3,0,null,null,1,"div",[["class","text-block"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,[' \u0412 \u044d\u0442\u043e\u0439 \u0433\u0430\u043b\u0435\u0440\u0435\u0435 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 "\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e" \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ']))],null,null)}function al(l){return u["\u0275vid"](0,[u["\u0275pid"](0,h.a,[]),(l()(),u["\u0275eld"](1,0,null,null,9,"div",[["class","breadcrumbs"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,Y)),u["\u0275did"](3,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,q)),u["\u0275did"](5,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,K)),u["\u0275did"](7,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](8,0,null,null,0,"span",[["class","icon icon-arrow-right"]],null,null,null,null,null)),(l()(),u["\u0275eld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u["\u0275ted"](10,null,["\u0413\u0430\u043b\u0435\u0440\u0435\u044f ",""])),(l()(),u["\u0275eld"](11,0,null,null,31,"div",[["class","user-galleries-wrap"],["ggDragImageLoad",""],["multiple",""]],[[2,"loading",null]],[[null,"onLoad"],[null,"srcChange"],[null,"fileChange"],[null,"draggedOver"],[null,"draggedLeave"],["document","dragover"],["document","drop"],["document","dragleave"]],function(l,n,e){var t=!0,i=l.component;"document:dragover"===n&&(t=!1!==u["\u0275nov"](l,13).onDocumentDragOver(e)&&t);"document:drop"===n&&(t=!1!==u["\u0275nov"](l,13).onDocumentDrop(e)&&t);"document:dragleave"===n&&(t=!1!==u["\u0275nov"](l,13).onDocumentDragLeave(e)&&t);"onLoad"===n&&(t=!1!==i.addPhoto()&&t);"srcChange"===n&&(t=!1!==(i.src=e)&&t);"fileChange"===n&&(t=!1!==(i.images=e)&&t);"draggedOver"===n&&(t=!1!==i.openDrag()&&t);"draggedLeave"===n&&(t=!1!==i.leaveDrag()&&t);return t},null,null)),u["\u0275prd"](512,null,a.a,a.a,[f.c,v.a]),u["\u0275did"](13,16384,null,0,b.a,[u.ElementRef,a.a],{file:[0,"file"],src:[1,"src"],draggableClass:[2,"draggableClass"]},{fileChange:"fileChange",srcChange:"srcChange",onLoad:"onLoad",draggedOver:"draggedOver",draggedLeave:"draggedLeave"}),(l()(),u["\u0275eld"](14,0,null,null,18,"div",[["class","title-block"]],[[2,"show",null]],null,null,null,null)),(l()(),u["\u0275eld"](15,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),u["\u0275ted"](16,null,["",""])),(l()(),u["\u0275eld"](17,0,null,null,10,"div",[["class","change-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](18,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var t=!0,i=l.component;"input"===n&&(t=!1!==u["\u0275nov"](l,19)._handleInput(e.target.value)&&t);"blur"===n&&(t=!1!==u["\u0275nov"](l,19).onTouched()&&t);"compositionstart"===n&&(t=!1!==u["\u0275nov"](l,19)._compositionStart()&&t);"compositionend"===n&&(t=!1!==u["\u0275nov"](l,19)._compositionEnd(e.target.value)&&t);"ngModelChange"===n&&(t=!1!==(i.newTitle=e)&&t);return t},null,null)),u["\u0275did"](19,16384,null,0,s.d,[u.Renderer2,u.ElementRef,[2,s.a]],null,null),u["\u0275prd"](1024,null,s.q,function(l){return[l]},[s.d]),u["\u0275did"](21,671744,null,0,s.v,[[8,null],[8,null],[8,null],[6,s.q]],{model:[0,"model"]},{update:"ngModelChange"}),u["\u0275prd"](2048,null,s.r,null,[s.v]),u["\u0275did"](23,16384,null,0,s.s,[[4,s.r]],null,null),(l()(),u["\u0275eld"](24,0,null,null,1,"a",[["class","btn btn-blue"]],[[2,"disabled",null]],[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.saveTitle()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"])),(l()(),u["\u0275eld"](26,0,null,null,1,"a",[["class","btn btn-gray"]],null,[[null,"click"]],function(l,n,e){var u=!0,t=l.component;"click"===n&&(u=!1!==t.cancel()&&u);return u},null,null)),(l()(),u["\u0275ted"](-1,null,["\u041e\u0442\u043c\u0435\u043d\u0430"])),(l()(),u["\u0275eld"](28,0,null,null,4,"span",[["class","system-message-wrap"]],null,null,null,null,null)),(l()(),u["\u0275and"](16777216,null,null,1,null,Q)),u["\u0275did"](30,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,el)),u["\u0275did"](32,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275and"](16777216,null,null,1,null,tl)),u["\u0275did"](34,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275eld"](35,0,null,null,7,"div",[["class","gallery-list"],["ggScrollHook",""]],null,[[null,"atBottom"]],function(l,n,e){var u=!0,t=l.component;"atBottom"===n&&(u=!1!==t.showMore()&&u);return u},null,null)),u["\u0275did"](36,737280,null,0,y.SortablejsDirective,[[2,I.GLOBALS],C.SortablejsService,u.ElementRef,u.NgZone,u.Renderer2],{sortablejs:[0,"sortablejs"],inputOptions:[1,"inputOptions"]},null),u["\u0275did"](37,147456,null,0,S.a,[u.ElementRef,R.a],null,{atBottom:"atBottom"}),(l()(),u["\u0275and"](16777216,null,null,2,null,il)),u["\u0275did"](39,278528,null,0,i.n,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),u["\u0275ppd"](40,2),(l()(),u["\u0275and"](16777216,null,null,1,null,ol)),u["\u0275did"](42,16384,null,0,i.o,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,(null==e.albumInfo?null:e.albumInfo.objType)==e.ObjType.USER),l(n,5,0,(null==e.albumInfo?null:e.albumInfo.objType)==e.ObjType.USER),l(n,7,0,(null==e.albumInfo?null:e.albumInfo.objType)==e.ObjType.MATERIALS);l(n,13,0,e.images,e.src,"#block"),l(n,21,0,e.newTitle),l(n,30,0,"success"===e.errorHandler.type),l(n,32,0,"error"===e.errorHandler.type),l(n,34,0,e.hasAccess),l(n,36,0,null==e.album?null:e.album.images,e.isLoaded?e.options:u["\u0275EMPTY_MAP"]);var t=u["\u0275unv"](n,39,0,l(n,40,0,u["\u0275nov"](n,0),null==e.album?null:e.album.images,e.imageCount));l(n,39,0,t),l(n,42,0,!(null!=e.album&&e.album.images.length))},function(l,n){var e=n.component;l(n,10,0,e.album.title),l(n,11,0,!e.isLoaded),l(n,14,0,e.changingTitle),l(n,16,0,null==e.album?null:e.album.title),l(n,18,0,u["\u0275nov"](n,23).ngClassUntouched,u["\u0275nov"](n,23).ngClassTouched,u["\u0275nov"](n,23).ngClassPristine,u["\u0275nov"](n,23).ngClassDirty,u["\u0275nov"](n,23).ngClassValid,u["\u0275nov"](n,23).ngClassInvalid,u["\u0275nov"](n,23).ngClassPending),l(n,24,0,!e.newTitle)})}u["\u0275ccf"]("gg-gallery-album",G,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,3,"gg-gallery-album",[],null,null,null,al,$)),u["\u0275prd"](512,null,w.a,w.a,[]),u["\u0275prd"](512,null,k.a,k.a,[]),u["\u0275did"](3,573440,null,0,G,[_.a,O.a,L.a,w.a,A.a,u.NgZone,k.a,H.a,f.j],null,null)],null,null)},{albumInfo:"albumInfo",hasAccess:"hasAccess",photoId:"photoId"},{},[]);var rl=e("Ij5Q");e.d(n,"a",function(){return dl});var sl=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cl(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,4,"div",[["class","section main-block"]],null,null,null,null,null)),(l()(),u["\u0275eld"](1,0,null,null,3,"gg-gallery-album",[],null,null,null,al,$)),u["\u0275prd"](512,null,w.a,w.a,[]),u["\u0275prd"](512,null,k.a,k.a,[]),u["\u0275did"](4,573440,null,0,G,[_.a,O.a,L.a,w.a,A.a,u.NgZone,k.a,H.a,f.j],{albumInfo:[0,"albumInfo"],hasAccess:[1,"hasAccess"],photoId:[2,"photoId"]},null)],function(l,n){var e=n.component;l(n,4,0,e.albumInfo,e.hasAccess,e.photoId)},null)}var dl=u["\u0275ccf"]("gg-gallery",rl.a,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"gg-gallery",[],null,null,null,cl,sl)),u["\u0275did"](1,114688,null,0,rl.a,[t.a,A.a,O.a],null,null)],function(l,n){l(n,1,0)},null)},{},{},[])}}]);