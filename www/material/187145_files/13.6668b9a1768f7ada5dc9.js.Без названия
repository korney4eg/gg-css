(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"3JiZ":function(t,e,i){"use strict";i.d(e,"a",function(){return o});i("awt7");var o=function(){function t(t){var e=this;this.modalService=t,this.result=new Promise(function(t,i){e.resolveResult=t,e.rejectResult=i})}return t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.modalService.close()},t.prototype.saveImg=function(t){this.resolveResult(t)},t}()},AYQ4:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var o=i("mrSG"),n=i("CcnG"),r=(i("mSP8"),i("M7dk"),function(){function t(t){this.ggUtils=t,this.type="png",this.close=new n.EventEmitter,this.save=new n.EventEmitter}return t.prototype.ngOnInit=function(){if(this.src)return this.initImg();this.type=this.option&&this.option.typeImg?this.option.typeImg:this.file.type.split("/")[1]},t.prototype.initImg=function(){return o.e(this,void 0,void 0,function(){var t,e;return o.h(this,function(i){switch(i.label){case 0:return(t=document.createElement("img")).setAttribute("crossorigin","anonymous"),e=this,[4,this.loadImg(t,this.src)];case 1:return e.imgB64=i.sent(),[2]}})})},t.prototype.loadImg=function(t,e){return o.e(this,void 0,void 0,function(){var i=this;return o.h(this,function(n){return t.src=e,[2,new Promise(function(e,n){t.onload=function(){return o.e(i,void 0,void 0,function(){var i,n,r;return o.h(this,function(o){switch(o.label){case 0:return i=document.createElement("canvas"),n=t.src.match(/(jpg|jpeg|png|gif)$/i),this.type=n?n[0]:"webp",i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),[4,this.ggUtils.convasToDataUrl(i,this.type)];case 1:return r=o.sent(),e(r),[2]}})})},t.onerror=function(t){i.close.emit(),setTimeout(function(){alert("\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u044d\u0442\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0435.")},1e3),n()}})]})})},t.prototype.toBase64=function(t){return o.e(this,void 0,void 0,function(){return o.h(this,function(e){return[2,new Promise(function(e,i){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){e(o.result)},o.onerror=function(t){return i(t)}})]})})},t.prototype.convertB64ToFile=function(){return o.e(this,void 0,void 0,function(){var t,e,i,n,r,s,a,p;return o.h(this,function(o){switch(o.label){case 0:return t=this.ggUtils.parseB64Data(this.resultB64Img),e=t.contentType,i=t.b64Data,this.file&&"image/gif"===this.file.type?(s=(r=Utils).post,a=["api/4/upload/gif"],p={},[4,this.toBase64(this.file)]):[3,3];case 1:return[4,s.apply(r,a.concat([(p.file=o.sent(),p.coordinates=this.cropperPosition,p)]))];case 2:return n=o.sent(),[2,this.ggUtils.b64toFile(n,"image/gif",this.file.name)];case 3:return[2,this.ggUtils.b64toFile(i,e,this.file.name)]}})})},t.prototype.imageCropped=function(t){this.cropperPosition=t.cropperPosition,this.resultB64Img=t.base64},t.prototype.rotateRight=function(){this.imageCropper.rotateRight()},t.prototype.saveImg=function(){return o.e(this,void 0,void 0,function(){var t,e;return o.h(this,function(i){switch(i.label){case 0:return e=(t=this.save).emit,[4,this.convertB64ToFile()];case 1:return e.apply(t,[i.sent()]),[2]}})})},t}())},M7dk:function(t,e,i){"use strict"},Pmnn:function(t,e,i){"use strict";var o=i("CcnG"),n=i("WuXZ"),r=i("FTOZ"),s=i("AYQ4"),a=i("bDe0"),p=i("3JiZ"),l=i("l1nV");i.d(e,"a",function(){return g});var c=[[""]],u=o["\u0275crt"]({encapsulation:0,styles:c,data:{}});function h(t){return o["\u0275vid"](2,[(t()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","popup-block-new"]],null,null,null,null,null)),(t()(),o["\u0275eld"](1,0,null,null,3,"div",[["class","popup-inner"]],null,null,null,null,null)),(t()(),o["\u0275eld"](2,0,null,null,2,"gg-picture-editor",[],null,[[null,"ggClickOutside"],[null,"save"],[null,"close"],["document","mousedown"]],function(t,e,i){var n=!0,r=t.component;"document:mousedown"===e&&(n=!1!==o["\u0275nov"](t,3).clickHandler(i,i.target)&&n);"ggClickOutside"===e&&(n=!1!==r.close()&&n);"save"===e&&(n=!1!==r.saveImg(i)&&n);"close"===e&&(n=!1!==r.close()&&n);return n},n.c,n.b)),o["\u0275did"](3,16384,null,0,r.a,[o.ElementRef],null,{event:"ggClickOutside"}),o["\u0275did"](4,114688,null,0,s.a,[a.a],{src:[0,"src"],file:[1,"file"],option:[2,"option"]},{close:"close",save:"save"})],function(t,e){var i=e.component;t(e,4,0,i.inputData.src,i.inputData.file,i.inputData.options)},null)}var g=o["\u0275ccf"]("gg-edit-img-modal",p.a,function(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,1,"gg-edit-img-modal",[],null,null,null,h,u)),o["\u0275did"](1,114688,null,0,p.a,[l.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[])},WuXZ:function(t,e,i){"use strict";var o=i("CcnG"),n=i("efFR"),r=i("Ip0R"),s=i("ZYjt"),a=(o["\u0275cmf"](n.b,[],function(t){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,r.q,r.p,[o.LOCALE_ID,[2,r.F]]),o["\u0275mpd"](1073742336,r.c,r.c,[]),o["\u0275mpd"](1073742336,n.b,n.b,[])])}),o["\u0275crt"]({encapsulation:0,styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}'],data:{}}));function p(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,22,"div",[["class","cropper"]],[[2,"rounded",null],[4,"top","px"],[4,"left","px"],[4,"width","px"],[4,"height","px"],[4,"margin-left",null],[4,"visibility",null]],null,null,null,null)),(t()(),o["\u0275eld"](1,0,null,null,1,"div",[["class","move"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"move")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"move")&&o);return o},null,null)),(t()(),o["\u0275ted"](-1,null,["\xa0"])),(t()(),o["\u0275eld"](3,0,null,null,1,"span",[["class","resize topleft"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","topleft")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","topleft")&&o);return o},null,null)),(t()(),o["\u0275eld"](4,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](5,0,null,null,1,"span",[["class","resize top"]],null,null,null,null,null)),(t()(),o["\u0275eld"](6,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](7,0,null,null,1,"span",[["class","resize topright"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","topright")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","topright")&&o);return o},null,null)),(t()(),o["\u0275eld"](8,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](9,0,null,null,1,"span",[["class","resize right"]],null,null,null,null,null)),(t()(),o["\u0275eld"](10,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](11,0,null,null,1,"span",[["class","resize bottomright"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","bottomright")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","bottomright")&&o);return o},null,null)),(t()(),o["\u0275eld"](12,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](13,0,null,null,1,"span",[["class","resize bottom"]],null,null,null,null,null)),(t()(),o["\u0275eld"](14,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](15,0,null,null,1,"span",[["class","resize bottomleft"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","bottomleft")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","bottomleft")&&o);return o},null,null)),(t()(),o["\u0275eld"](16,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](17,0,null,null,1,"span",[["class","resize left"]],null,null,null,null,null)),(t()(),o["\u0275eld"](18,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),o["\u0275eld"](19,0,null,null,0,"span",[["class","resize-bar top"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","top")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","top")&&o);return o},null,null)),(t()(),o["\u0275eld"](20,0,null,null,0,"span",[["class","resize-bar right"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","right")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","right")&&o);return o},null,null)),(t()(),o["\u0275eld"](21,0,null,null,0,"span",[["class","resize-bar bottom"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","bottom")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","bottom")&&o);return o},null,null)),(t()(),o["\u0275eld"](22,0,null,null,0,"span",[["class","resize-bar left"]],null,[[null,"mousedown"],[null,"touchstart"]],function(t,e,i){var o=!0,n=t.component;"mousedown"===e&&(o=!1!==n.startMove(i,"resize","left")&&o);"touchstart"===e&&(o=!1!==n.startMove(i,"resize","left")&&o);return o},null,null))],null,function(t,e){var i=e.component;t(e,0,0,i.roundCropper,i.cropper.y1,i.cropper.x1,i.cropper.x2-i.cropper.x1,i.cropper.y2-i.cropper.y1,"center"===i.alignImage?i.marginLeft:null,i.imageVisible?"visible":"hidden")})}function l(t){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{sourceImage:0}),(t()(),o["\u0275eld"](1,0,null,null,3,"div",[],[[4,"background",null]],null,null,null,null)),(t()(),o["\u0275eld"](2,0,[[1,0],["sourceImage",1]],null,0,"img",[["class","source-image"]],[[8,"src",4],[4,"visibility",null]],[[null,"load"]],function(t,e,i){var o=!0,n=t.component;"load"===e&&(o=!1!==n.imageLoadedInView()&&o);return o},null,null)),(t()(),o["\u0275and"](16777216,null,null,1,null,p)),o["\u0275did"](4,16384,null,0,r.o,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,4,0,e.component.imageVisible)},function(t,e){var i=e.component;t(e,1,0,i.imageVisible&&i.backgroundColor),t(e,2,0,i.safeImgDataUrl,i.imageVisible?"visible":"hidden")})}o["\u0275ccf"]("image-cropper",n.a,function(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,1,"image-cropper",[],[[4,"text-align",null]],[["window","resize"],["document","mousemove"],["document","touchmove"],["document","mouseup"],["document","touchend"]],function(t,e,i){var n=!0;return"window:resize"===e&&(n=!1!==o["\u0275nov"](t,1).onResize()&&n),"document:mousemove"===e&&(n=!1!==o["\u0275nov"](t,1).moveImg(i)&&n),"document:touchmove"===e&&(n=!1!==o["\u0275nov"](t,1).moveImg(i)&&n),"document:mouseup"===e&&(n=!1!==o["\u0275nov"](t,1).moveStop()&&n),"document:touchend"===e&&(n=!1!==o["\u0275nov"](t,1).moveStop()&&n),n},l,a)),o["\u0275did"](1,573440,null,0,n.a,[s.c,o.ChangeDetectorRef,o.NgZone],null,null)],null,function(t,e){t(e,0,0,o["\u0275nov"](e,1).alignImage)})},{imageFileChanged:"imageFileChanged",imageChangedEvent:"imageChangedEvent",imageBase64:"imageBase64",format:"format",outputType:"outputType",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",cropper:"cropper",alignImage:"alignImage"},{startCropImage:"startCropImage",imageCropped:"imageCropped",imageCroppedBase64:"imageCroppedBase64",imageCroppedFile:"imageCroppedFile",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},[]);var c=function(){function t(){this.nameFile="File",this.saveImg=new o.EventEmitter,this.rotateRight=new o.EventEmitter,this.load=!1}return t.prototype.ngOnInit=function(){},t.prototype.save=function(){this.load=!0,this.saveImg.emit()},t}(),u=[[".picture-control[_ngcontent-%COMP%]{padding:0 24px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:80px;color:#fff}.picture-control[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]{width:100%;text-align:center}.icon[_ngcontent-%COMP%]{position:relative;font-size:24px;color:#fff;cursor:pointer}.icon[_ngcontent-%COMP%]:hover   .tip[_ngcontent-%COMP%]{display:block}.tip[_ngcontent-%COMP%]{display:none;position:absolute;top:-37px;left:50%;padding:7px 14px;font-size:14px;line-height:23px;color:#fff;background-color:#22293f;box-shadow:0 2px 2px rgba(0,0,0,.24),0 4px 4px rgba(0,0,0,.12);border-radius:4px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0)}"]],h=o["\u0275crt"]({encapsulation:0,styles:u,data:{}});function g(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,1,"a",[["class","btn btn-blue"]],null,[[null,"click"]],function(t,e,i){var o=!0,n=t.component;"click"===e&&(o=!1!==n.save()&&o);return o},null,null)),(t()(),o["\u0275ted"](-1,null,["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"]))],null,null)}function d(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,0,"a",[["class","btn loading"]],null,null,null,null,null))],null,null)}function m(t){return o["\u0275vid"](2,[(t()(),o["\u0275eld"](0,0,null,null,9,"div",[["class","picture-control"]],null,null,null,null,null)),(t()(),o["\u0275eld"](1,0,null,null,2,"a",[["class","icon icon-rotate-24"]],null,[[null,"click"]],function(t,e,i){var o=!0,n=t.component;"click"===e&&(o=!1!==n.rotateRight.emit()&&o);return o},null,null)),(t()(),o["\u0275eld"](2,0,null,null,1,"span",[["class","tip"]],null,null,null,null,null)),(t()(),o["\u0275ted"](-1,null,["\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"])),(t()(),o["\u0275eld"](4,0,null,null,1,"div",[["class","title-block"]],null,null,null,null,null)),(t()(),o["\u0275ted"](5,null,["",""])),(t()(),o["\u0275and"](16777216,null,null,1,null,g)),o["\u0275did"](7,16384,null,0,r.o,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),o["\u0275and"](16777216,null,null,1,null,d)),o["\u0275did"](9,16384,null,0,r.o,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var i=e.component;t(e,7,0,!i.load),t(e,9,0,i.load)},function(t,e){t(e,5,0,e.component.nameFile)})}o["\u0275ccf"]("gg-picture-editor-panel",c,function(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,1,"gg-picture-editor-panel",[],null,null,null,m,h)),o["\u0275did"](1,114688,null,0,c,[],null,null)],function(t,e){t(e,1,0)},null)},{nameFile:"nameFile"},{saveImg:"saveImg",rotateRight:"rotateRight"},[]);var f=i("AYQ4"),v=i("bDe0");i.d(e,"b",function(){return y}),i.d(e,"c",function(){return x}),i.d(e,"a",function(){return M});var b=[["[_nghost-%COMP%]{display:block;border-radius:2px;background-color:#171d30}[_nghost-%COMP%]   .title-block[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]   .title-block[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{padding:8px;color:#fff;background-color:rgba(68,83,126,.5);border-radius:50%}[_nghost-%COMP%]   .title-block[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#4f98ff}[_nghost-%COMP%]   .title-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;line-height:32px;font-weight:600;color:#fff}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{padding:0;border:4px solid #4f5976}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper{outline:rgba(68,83,126,.5) solid 100vw;border:2px solid #c63737}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper:after{border:none}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .move{border:none!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize{opacity:1!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize .square{width:14px!important;height:14px!important;border:none!important;background:#c63737!important;border-radius:50%}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.topleft{top:-17px!important;left:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.top{top:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.topright{top:-17px!important;right:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.right{right:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.bottomright{right:-17px!important;bottom:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.bottom{bottom:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.bottomleft{left:-17px!important;bottom:-17px!important}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]     .cropper .resize.left{left:-17px!important}"]],y=o["\u0275crt"]({encapsulation:0,styles:b,data:{}});function x(t){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{imageCropper:0}),(t()(),o["\u0275eld"](1,0,null,null,4,"div",[["class","title-block"]],null,null,null,null,null)),(t()(),o["\u0275eld"](2,0,null,null,3,"div",[["class","flex"]],null,null,null,null,null)),(t()(),o["\u0275eld"](3,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),o["\u0275ted"](-1,null,["\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438 \u043e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"])),(t()(),o["\u0275eld"](5,0,null,null,0,"a",[["class","close icon icon-close3"]],null,[[null,"click"]],function(t,e,i){var o=!0,n=t.component;"click"===e&&(o=!1!==n.close.emit()&&o);return o},null,null)),(t()(),o["\u0275eld"](6,0,null,null,1,"image-cropper",[["outputType","base64"]],[[4,"text-align",null]],[[null,"imageCropped"],["window","resize"],["document","mousemove"],["document","touchmove"],["document","mouseup"],["document","touchend"]],function(t,e,i){var n=!0,r=t.component;"window:resize"===e&&(n=!1!==o["\u0275nov"](t,7).onResize()&&n);"document:mousemove"===e&&(n=!1!==o["\u0275nov"](t,7).moveImg(i)&&n);"document:touchmove"===e&&(n=!1!==o["\u0275nov"](t,7).moveImg(i)&&n);"document:mouseup"===e&&(n=!1!==o["\u0275nov"](t,7).moveStop()&&n);"document:touchend"===e&&(n=!1!==o["\u0275nov"](t,7).moveStop()&&n);"imageCropped"===e&&(n=!1!==r.imageCropped(i)&&n);return n},l,a)),o["\u0275did"](7,573440,[[1,4]],0,n.a,[s.c,o.ChangeDetectorRef,o.NgZone],{imageFileChanged:[0,"imageFileChanged"],imageBase64:[1,"imageBase64"],format:[2,"format"],outputType:[3,"outputType"],maintainAspectRatio:[4,"maintainAspectRatio"],aspectRatio:[5,"aspectRatio"],cropperMinWidth:[6,"cropperMinWidth"],cropperMinHeight:[7,"cropperMinHeight"]},{imageCropped:"imageCropped"}),(t()(),o["\u0275eld"](8,0,null,null,1,"gg-picture-editor-panel",[],null,[[null,"saveImg"],[null,"rotateRight"]],function(t,e,i){var o=!0,n=t.component;"saveImg"===e&&(o=!1!==n.saveImg()&&o);"rotateRight"===e&&(o=!1!==n.rotateRight()&&o);return o},m,h)),o["\u0275did"](9,114688,null,0,c,[],{nameFile:[0,"nameFile"]},{saveImg:"saveImg",rotateRight:"rotateRight"})],function(t,e){var i=e.component;t(e,7,0,i.file,i.imgB64,i.type,"base64",i.option.maintainAspectRatio,i.option.aspectRatio,i.option.cropperMinWidth,i.option.cropperMinHeight),t(e,9,0,null==i.file?null:i.file.name)},function(t,e){t(e,6,0,o["\u0275nov"](e,7).alignImage)})}var M=o["\u0275ccf"]("gg-picture-editor",f.a,function(t){return o["\u0275vid"](0,[(t()(),o["\u0275eld"](0,0,null,null,1,"gg-picture-editor",[],null,null,null,x,y)),o["\u0275did"](1,114688,null,0,f.a,[v.a],null,null)],function(t,e){t(e,1,0)},null)},{src:"src",file:"file",option:"option"},{close:"close",save:"save"},[])},Z9Pi:function(t,e,i){"use strict";i.d(e,"a",function(){return n});i("awt7");var o=i("3JiZ"),n=function(){return function(t,e){e.addResolver(o.a,t)}}()},efFR:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"b",function(){return c});var o=i("mrSG"),n=i("CcnG"),r=i("Ip0R"),s=i("ZYjt");function a(t){try{var e=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,o=new Uint8Array(i),n=0;n<i;n++)o[n]=e.charCodeAt(n);return o.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;var i=e.byteLength,o=2;for(;o<i;){if(e.getUint16(o+2,!1)<=8)return-1;var n=e.getUint16(o,!1);if(o+=2,65505==n){if(1165519206!=e.getUint32(o+=2,!1))return-1;var r=18761==e.getUint16(o+=6,!1);o+=e.getUint32(o+4,r);var s=e.getUint16(o,r);o+=2;for(var a=0;a<s;a++)if(274==e.getUint16(o+12*a,r))return e.getUint16(o+12*a+8,r)}else{if(65280!=(65280&n))break;o+=e.getUint16(o,!1)}}return-1}(t);return e>1?p(t,e):Promise.resolve(t)}catch(i){return Promise.reject(i)}}function p(t,e){return new Promise(function(i,o){var n=new Image;n.onload=function(){var t=n.width,r=n.height,s=document.createElement("canvas"),a=s.getContext("2d");a?(4<e&&e<9?(s.width=r,s.height=t):(s.width=t,s.height=r),function(t,e,i,o){switch(e){case 2:t.transform(-1,0,0,1,i,0);break;case 3:t.transform(-1,0,0,-1,i,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,i);break;case 8:t.transform(0,-1,1,0,0,i)}}(a,e,t,r),a.drawImage(n,0,0),i(s.toDataURL())):o(new Error("No context"))},n.src=t})}var l=function(){function t(t,e,i){this.sanitizer=t,this.cd=e,this.zone=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="both",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.startCropImage=new n.EventEmitter,this.imageCropped=new n.EventEmitter,this.imageCroppedBase64=new n.EventEmitter,this.imageCroppedFile=new n.EventEmitter,this.imageLoaded=new n.EventEmitter,this.cropperReady=new n.EventEmitter,this.loadImageFailed=new n.EventEmitter,this.initCropper()}return Object.defineProperty(t.prototype,"imageFileChanged",{set:function(t){this.initCropper(),t&&this.loadImageFile(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageChangedEvent",{set:function(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageBase64",{set:function(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()},t.prototype.initCropper=function(){this.imageVisible=!1,this.originalImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4},t.prototype.loadImageFile=function(t){var e=this,i=new FileReader;i.onload=function(i){var o=t.type;e.isValidImageType(o)?e.checkExifAndLoadBase64Image(i.target.result):e.loadImageFailed.emit()},i.readAsDataURL(t)},t.prototype.isValidImageType=function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)},t.prototype.checkExifAndLoadBase64Image=function(t){var e=this;a(t).then(function(t){return e.fitImageToAspectRatio(t)}).then(function(t){return e.loadBase64Image(t)}).catch(function(){return e.loadImageFailed.emit()})},t.prototype.fitImageToAspectRatio=function(t){return this.containWithinAspectRatio?(e=t,i=this.aspectRatio,new Promise(function(t,o){var n=new Image;n.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");if(r){var s=n.height*i,a=n.width/i;e.width=Math.max(n.width,s),e.height=Math.max(n.height,a);var p=(e.width-n.width)/2,l=(e.height-n.height)/2;r.drawImage(n,p,l),t(e.toDataURL())}else o(new Error("No context"))},n.src=e})):Promise.resolve(t);var e,i},t.prototype.loadBase64Image=function(t){var e=this;this.originalBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.originalImage=new Image,this.originalImage.onload=function(){e.originalSize.width=e.originalImage.width,e.originalSize.height=e.originalImage.height,e.cd.markForCheck()},this.originalImage.src=t},t.prototype.imageLoadedInView=function(){var t=this;null!=this.originalImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(function(){return t.checkImageMaxSizeRecursively()}))},t.prototype.checkImageMaxSizeRecursively=function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(function(){t.checkImageMaxSizeRecursively()},50))},t.prototype.onResize=function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()},t.prototype.rotateLeft=function(){this.transformBase64(8)},t.prototype.rotateRight=function(){this.transformBase64(6)},t.prototype.flipHorizontal=function(){this.transformBase64(2)},t.prototype.flipVertical=function(){this.transformBase64(4)},t.prototype.transformBase64=function(t){var e=this;this.originalBase64&&p(this.originalBase64,t).then(function(t){return e.fitImageToAspectRatio(t)}).then(function(t){return e.loadBase64Image(t)})},t.prototype.resizeCropperPosition=function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)},t.prototype.resetCropperPosition=function(){var t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0},t.prototype.startMove=function(t,e,i){void 0===i&&(i=null),t.preventDefault(),this.moveStart=Object(o.a)({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)},t.prototype.moveImg=function(t){this.moveStart.active&&(t.stopPropagation(),t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())},t.prototype.setMaxSize=function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}},t.prototype.setCropperScaledMinSize=function(){this.originalImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)},t.prototype.setCropperScaledMinWidth=function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.originalImage.width*this.maxSize.width):20},t.prototype.setCropperScaledMinHeight=function(){this.maintainAspectRatio?this.cropperScaledMinHeight=Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.originalImage.height*this.maxSize.height):this.cropperScaledMinHeight=20},t.prototype.checkCropperPosition=function(t){void 0===t&&(t=!1),this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)},t.prototype.moveStop=function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())},t.prototype.move=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i},t.prototype.resize=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()},t.prototype.checkAspectRatio=function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}},t.prototype.doAutoCrop=function(){this.autoCrop&&this.crop()},t.prototype.crop=function(t){if(void 0===t&&(t=this.outputType),this.sourceImage.nativeElement&&null!=this.originalImage){this.startCropImage.emit();var e=this.getImagePosition(),i=e.x2-e.x1,n=e.y2-e.y1,r=document.createElement("canvas");r.width=i,r.height=n;var s=r.getContext("2d");if(s){null!=this.backgroundColor&&(s.fillStyle=this.backgroundColor,s.fillRect(0,0,i,n)),s.drawImage(this.originalImage,e.x1,e.y1,i,n,0,0,i,n);var a={width:i,height:n,imagePosition:e,cropperPosition:Object(o.a)({},this.cropper)},p=this.getResizeRatio(i,n);return 1!==p&&(a.width=Math.round(i*p),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(n*p),function(t,e,i,o){void 0===o&&(o=!0);var n=t.width,r=t.height,s=n/(e=Math.round(e)),a=r/(i=Math.round(i)),p=Math.ceil(s/2),l=Math.ceil(a/2),c=t.getContext("2d");if(c){for(var u=c.getImageData(0,0,n,r),h=c.createImageData(e,i),g=u.data,d=h.data,m=0;m<i;m++)for(var f=0;f<e;f++){var v=4*(f+m*e),b=m*a,y=0,x=0,M=0,O=0,C=0,z=0,w=0,j=Math.floor(f*s),P=Math.floor(m*a),I=Math.ceil((f+1)*s),S=Math.ceil((m+1)*a);I=Math.min(I,n),S=Math.min(S,r);for(var R=P;R<S;R++)for(var _=Math.abs(b-R)/l,k=f*s,A=_*_,F=j;F<I;F++){var E=Math.abs(k-F)/p,T=Math.sqrt(A+E*E);if(!(T>=1)){var H=4*(F+R*n);w+=(y=2*T*T*T-3*T*T+1)*g[H+3],M+=y,g[H+3]<255&&(y=y*g[H+3]/250),O+=y*g[H],C+=y*g[H+1],z+=y*g[H+2],x+=y}}d[v]=O/x,d[v+1]=C/x,d[v+2]=z/x,d[v+3]=w/M}o?(t.width=e,t.height=i):c.clearRect(0,0,n,r),c.putImageData(h,0,0)}}(r,a.width,a.height)),this.cropToOutputType(t,r,a)}}return null},t.prototype.getImagePosition=function(){var t=this.sourceImage.nativeElement,e=this.originalSize.width/t.offsetWidth;return{x1:Math.round(this.cropper.x1*e),y1:Math.round(this.cropper.y1*e),x2:Math.min(Math.round(this.cropper.x2*e),this.originalSize.width),y2:Math.min(Math.round(this.cropper.y2*e),this.originalSize.height)}},t.prototype.cropToOutputType=function(t,e,i){var o=this;switch(t){case"file":return this.cropToFile(e).then(function(t){return i.file=t,o.imageCropped.emit(i),i});case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then(function(t){return i.file=t,o.imageCropped.emit(i),i});default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}},t.prototype.cropToBase64=function(t){var e=t.toDataURL("image/"+this.format,this.getQuality());return this.imageCroppedBase64.emit(e),e},t.prototype.cropToFile=function(t){var e=this;return this.getCanvasBlob(t).then(function(t){return t&&e.imageCroppedFile.emit(t),t})},t.prototype.getCanvasBlob=function(t){var e=this;return new Promise(function(i){t.toBlob(function(t){return e.zone.run(function(){return i(t)})},"image/"+e.format,e.getQuality())})},t.prototype.getQuality=function(){return Math.min(1,Math.max(0,this.imageQuality/100))},t.prototype.getResizeRatio=function(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1},t.prototype.getClientX=function(t){return t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX},t.prototype.getClientY=function(t){return t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY},t.ctorParameters=function(){return[{type:s.c},{type:n.ChangeDetectorRef},{type:n.NgZone}]},Object(o.f)([Object(n.ViewChild)("sourceImage",{static:!0}),Object(o.j)("design:type",n.ElementRef)],t.prototype,"sourceImage",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",File),Object(o.j)("design:paramtypes",[File])],t.prototype,"imageFileChanged",null),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object),Object(o.j)("design:paramtypes",[Object])],t.prototype,"imageChangedEvent",null),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",String),Object(o.j)("design:paramtypes",[String])],t.prototype,"imageBase64",null),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",String)],t.prototype,"format",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",String)],t.prototype,"outputType",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"maintainAspectRatio",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"aspectRatio",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"resizeToWidth",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"resizeToHeight",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"cropperMinWidth",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"cropperMinHeight",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"roundCropper",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"onlyScaleDown",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"imageQuality",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"autoCrop",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",String)],t.prototype,"backgroundColor",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"containWithinAspectRatio",void 0),Object(o.f)([Object(n.Input)(),Object(o.j)("design:type",Object)],t.prototype,"cropper",void 0),Object(o.f)([Object(n.HostBinding)("style.text-align"),Object(n.Input)(),Object(o.j)("design:type",String)],t.prototype,"alignImage",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"startCropImage",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"imageCropped",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"imageCroppedBase64",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"imageCroppedFile",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"imageLoaded",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"cropperReady",void 0),Object(o.f)([Object(n.Output)(),Object(o.j)("design:type",Object)],t.prototype,"loadImageFailed",void 0),Object(o.f)([Object(n.HostListener)("window:resize"),Object(o.j)("design:type",Function),Object(o.j)("design:paramtypes",[]),Object(o.j)("design:returntype",void 0)],t.prototype,"onResize",null),Object(o.f)([Object(n.HostListener)("document:mousemove",["$event"]),Object(n.HostListener)("document:touchmove",["$event"]),Object(o.j)("design:type",Function),Object(o.j)("design:paramtypes",[Object]),Object(o.j)("design:returntype",void 0)],t.prototype,"moveImg",null),Object(o.f)([Object(n.HostListener)("document:mouseup"),Object(n.HostListener)("document:touchend"),Object(o.j)("design:type",Function),Object(o.j)("design:paramtypes",[]),Object(o.j)("design:returntype",void 0)],t.prototype,"moveStop",null),t=Object(o.f)([Object(n.Component)({selector:"image-cropper",template:'<div [style.background]="imageVisible && backgroundColor">\n    <img\n        #sourceImage\n        class="source-image"\n        [src]="safeImgDataUrl"\n        [style.visibility]="imageVisible ? \'visible\' : \'hidden\'"\n        (load)="imageLoadedInView()"\n    />\n    <div class="cropper"\n         *ngIf="imageVisible"\n         [class.rounded]="roundCropper"\n         [style.top.px]="cropper.y1"\n         [style.left.px]="cropper.x1"\n         [style.width.px]="cropper.x2 - cropper.x1"\n         [style.height.px]="cropper.y2 - cropper.y1"\n         [style.margin-left]="alignImage === \'center\' ? marginLeft : null"\n         [style.visibility]="imageVisible ? \'visible\' : \'hidden\'"\n    >\n        <div\n                (mousedown)="startMove($event, \'move\')"\n                (touchstart)="startMove($event, \'move\')"\n                class="move"\n        >&nbsp;</div>\n        <span\n                class="resize topleft"\n                (mousedown)="startMove($event, \'resize\', \'topleft\')"\n                (touchstart)="startMove($event, \'resize\', \'topleft\')"\n        ><span class="square"></span></span>\n        <span\n                class="resize top"\n        ><span class="square"></span></span>\n        <span\n                class="resize topright"\n                (mousedown)="startMove($event, \'resize\', \'topright\')"\n                (touchstart)="startMove($event, \'resize\', \'topright\')"\n        ><span class="square"></span></span>\n        <span\n                class="resize right"\n        ><span class="square"></span></span>\n        <span\n                class="resize bottomright"\n                (mousedown)="startMove($event, \'resize\', \'bottomright\')"\n                (touchstart)="startMove($event, \'resize\', \'bottomright\')"\n        ><span class="square"></span></span>\n        <span\n                class="resize bottom"\n        ><span class="square"></span></span>\n        <span\n                class="resize bottomleft"\n                (mousedown)="startMove($event, \'resize\', \'bottomleft\')"\n                (touchstart)="startMove($event, \'resize\', \'bottomleft\')"\n        ><span class="square"></span></span>\n        <span\n                class="resize left"\n        ><span class="square"></span></span>\n        <span\n                class="resize-bar top"\n                (mousedown)="startMove($event, \'resize\', \'top\')"\n                (touchstart)="startMove($event, \'resize\', \'top\')"\n        ></span>\n        <span\n                class="resize-bar right"\n                (mousedown)="startMove($event, \'resize\', \'right\')"\n                (touchstart)="startMove($event, \'resize\', \'right\')"\n        ></span>\n        <span\n                class="resize-bar bottom"\n                (mousedown)="startMove($event, \'resize\', \'bottom\')"\n                (touchstart)="startMove($event, \'resize\', \'bottom\')"\n        ></span>\n        <span\n                class="resize-bar left"\n                (mousedown)="startMove($event, \'resize\', \'left\')"\n                (touchstart)="startMove($event, \'resize\', \'left\')"\n        ></span>\n    </div>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,styles:[':host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host>div{position:relative;width:100%}:host>div img.source-image{max-width:100%;max-height:100%}:host .cropper{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}:host .cropper:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}:host .cropper .move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .cropper .resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .cropper .resize .square{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .cropper .resize.topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .cropper .resize.top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .cropper .resize.topright{top:-12px;right:-12px;cursor:nesw-resize}:host .cropper .resize.right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .cropper .resize.bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .cropper .resize.bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .cropper .resize.bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .cropper .resize.left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .cropper .resize-bar{position:absolute;z-index:1}:host .cropper .resize-bar.top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .cropper .resize-bar.right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .cropper .resize-bar.bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .cropper .resize-bar.left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .cropper.rounded{outline-color:transparent}:host .cropper.rounded:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){:host .cropper{outline-width:100vh}:host .cropper.rounded:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}:host .cropper.rounded .move{border-radius:100%}']}),Object(o.j)("design:paramtypes",[s.c,n.ChangeDetectorRef,n.NgZone])],t)}(),c=function(){function t(){}return t=Object(o.f)([Object(n.NgModule)({imports:[r.c],declarations:[l],exports:[l]})],t)}()},jH7M:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var o=i("mrSG"),n=i("CcnG"),r=(i("awt7"),i("MUcC")),s=i("3JiZ"),a=(i("M7dk"),i("mSP8"),function(){function t(t,e){this.modalService=t,this.utils=e,this.fileChange=new n.EventEmitter}return t.prototype.loadImg=function(t){return o.e(this,void 0,void 0,function(){var t,e,i,n;return o.h(this,function(o){switch(o.label){case 0:return[4,this.modalService.open(r.a,{returnFile:!0}).result];case 1:return(t=o.sent())?("string"==typeof t?e=t:i=t,[4,this.modalService.open(s.a,{src:e,file:i,options:this.editorOptions}).result]):[2];case 2:return n=o.sent(),this.fileChange.emit(n),[2]}})})},t.prototype.checkMinWidthHeight=function(t,e,i){return o.e(this,void 0,void 0,function(){var n,r,s;return o.h(this,function(o){switch(o.label){case 0:return[4,this.utils.getDimensionFileImg(t)];case 1:return n=o.sent(),r=n.width,s=n.height,[2,r<=e||s<=i]}})})},t.prototype.close=function(){this.modalService.close()},t}())}}]);